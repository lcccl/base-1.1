"use strict";!function(e,r){e.MenuTree={init:function(a){var t=this;t.ct=a.ct,t.queryType=a.type,t.queryUrl=a.url,t.queryParams=a.data,t.treeJson=a.treeJson,t.ct.on("click","li a",function(){var a=r(this),t=a.parent(),n=a.attr("action");"navtab"!=n&&"navtab-iframe"!=n||e.NavTab&&e.NavTab.openTab({id:a.attr("navtab-id"),title:r(r("span",a)[0]).text(),url:a.attr("navtab-url"),iframe:"navtab-iframe"==n}),(t="1"==t.attr("level")?t:t.parents("li[level=1]")).addClass("activeItem").siblings().removeClass("activeItem")}),t.loadTree()},loadTree:function(e){var a=this;e=r.extend({},e),a.queryType=e.type||a.queryType,a.queryUrl=e.url||a.queryUrl,a.queryParams=e.data||a.queryParams,a.treeJson=e.treeJson||a.treeJson,a.queryUrl?r.ajax({type:a.queryType,url:a.queryUrl,data:a.queryParams,showLoading:!0,cache:!1,dataType:"json",success:function(e){e instanceof Array?a.buildTree(e):0==e.code?a.buildTree(e.data):a.showError(e.message)},error:function(e,r,t){a.showError(t)}}):a.buildTree(a.treeJson)},buildTree:function(e){for(var r="",a=0;a<e.length;a++)r+=this.createTreeHtml(e[a],1);this.ct.html(r)},createTreeHtml:function(e,r){var a="";if(a+="<li"+(e.children?" class='treeview'":"")+" level='"+r+"'>",a+="<a href='#' action='"+e.action+"'","navtab"!=e.action&&"navtab-iframe"!=e.action||(a+=" navtab-url='"+e.url+"'"+(e.code?" navtab-id='"+e.code+"'":"")),a+=">",a+="<i class='fa "+e.icon+"'></i> <span>"+e.title+"</span>",e.children&&(a+="<span class='pull-right-container'><i class='fa fa-angle-left pull-right'></i></span>"),a+="</a>",e.children){a+="<ul class='treeview-menu'>";for(var t=0;t<e.children.length;t++)a+=this.createTreeHtml(e.children[t],r+1);a+="</ul>"}return a+="</li>"},showError:function(r){e.MsgBox?e.MsgBox.error(r):window.console?console.log(r):alert(r)}}}(window,jQuery);