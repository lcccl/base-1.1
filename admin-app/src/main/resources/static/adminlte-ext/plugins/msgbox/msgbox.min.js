"use strict";!function(t,e){var o="";o+='<div class="modal fade" style="display: none;">',o+='<div class="modal-dialog">',o+='<div class="modal-content modal-msgbox">',o+='<div class="modal-header">',o+='<button type="button" class="close close-btn" aria-label="Close"><span aria-hidden="true">×</span></button>',o+='<i class="modal-icon"></i><h4 class="modal-title"></h4>',o+="</div>",o+='<div class="modal-body">',o+="</div>",o+='<div class="modal-footer">',o+="</div>",o+="</div>",o+="</div>",o+="</div>";var n=function(t){this.params=e.extend({},t),this.events=e.extend({},t.events),this.init()};n.prototype={constructor:n,init:function(){var t=this,n=t.params,a=e(o);a.attr("id",(new Date).getTime()+"_"+parseInt(1e6*Math.random())),e(".modal-content",a).addClass(n.theme||""),e(".modal-title",a).text(n.title),e(".modal-body",a).html(n.content),n.width&&e(".modal-dialog",a).css("width",n.width);var s=e(".modal-footer",a);n.buttons?e.each(n.buttons,function(o,n){var i=n.clazz?n.clazz:"btn-default",l=n.label,r=e('<button type="button" class="btn '+i+'">'+l+"</button>");n.callback&&r.on("click",function(e){n.callback.call(t,a,r,e)}),s.append(r)}):s.remove(),a.on("click",".close-btn",function(){t.close()}),a.on("hidden.bs.modal",function(e){t.dispose()}),a.appendTo(document.body),t.box=a},show:function(t){var o=this,a=o.box,s=o.params,i=o.events;(t=e.extend({},t)).content&&e(".modal-body",a).html(t.content),i.onShow&&e.isFunction(i.onShow)&&i.onShow.call(o,a),a.modal({backdrop:t.backdrop||s.backdrop||"static"}),n.boxQueue.push(o)},close:function(){var t=this.box,o=this.events;o.onClose&&e.isFunction(o.onClose)&&o.onClose.call(this,t),t.modal("hide");for(var a=0;a<n.boxQueue.length;a++)if(n.boxQueue[a]==this){n.boxQueue.splice(a,1);break}},dispose:function(){this.box.removeData("bs.modal"),this.box.remove()}},e.extend(n,{boxQueue:[],info:function(t){return this.alert({title:"提示",theme:"modal-theme-info",msg:t})},warn:function(t){return this.alert({title:"警告",theme:"modal-theme-warn",msg:t})},error:function(t){return this.alert({title:"错误",theme:"modal-theme-error",msg:t})},alert:function(t){var e=new n({title:t.title,theme:t.theme||"",content:"<p>"+t.msg+"</p>",buttons:[{clazz:"close-btn btn-primary",label:"确定"}],events:t.events});return e.show(),e},confirm:function(t,e,o,a){var s=new n({title:"确认信息",theme:"modal-theme-confirm",content:"<p>"+t+"</p>",buttons:[{clazz:"close-btn btn-primary",label:"确定",callback:e},{clazz:"close-btn btn-default",label:"取消",callback:o}],events:a});return s.show(),s},open:function(t){var o=this;if((t=e.extend({},t)).iframe&&(t.content="<iframe class='modal-msgbox-iframe' src='"+t.url+"'"+(t.iframeHeight?" height='"+t.iframeHeight+"'":"")+"></iframe>"),t.content){new n(t).show()}else t.url&&e.ajax({type:t.type,url:t.url,data:t.data,cache:!1,showLoading:!0,success:function(e){var s=a(e);if("string"==typeof s){new n(t).show({content:e})}else o.error(s.message)},error:function(t,e,n){o.error(t.responseText||n||e)}})},getCurrentBox:function(){return this.boxQueue[this.boxQueue.length-1]},closeCurrentBox:function(){this.getCurrentBox().close()}});var a=function(t){if("string"!=typeof t)return t;try{return e.parseJSON(t)}catch(e){return t}};t.MsgBox=n}(window,jQuery);